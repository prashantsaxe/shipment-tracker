import{r as l,a as Q,b as J}from"./vendor-b69f2a9f.js";import{L as B,u as K,a as X,R as Z,b as R,N as D,B as ee}from"./router-b6abe006.js";import{a as re}from"./http-b5ee139b.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function d(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=d(n);fetch(n.href,i)}})();var W={exports:{}},P={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var te=l,se=Symbol.for("react.element"),ae=Symbol.for("react.fragment"),ne=Object.prototype.hasOwnProperty,oe=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ie={key:!0,ref:!0,__self:!0,__source:!0};function U(r,o,d){var s,n={},i=null,m=null;d!==void 0&&(i=""+d),o.key!==void 0&&(i=""+o.key),o.ref!==void 0&&(m=o.ref);for(s in o)ne.call(o,s)&&!ie.hasOwnProperty(s)&&(n[s]=o[s]);if(r&&r.defaultProps)for(s in o=r.defaultProps,o)n[s]===void 0&&(n[s]=o[s]);return{$$typeof:se,type:r,key:i,ref:m,props:n,_owner:oe.current}}P.Fragment=ae;P.jsx=U;P.jsxs=U;W.exports=P;var e=W.exports,A={},L=Q;A.createRoot=L.createRoot,A.hydrateRoot=L.hydrateRoot;const le="https://shipment-tracker-66r7qd4y1-streamsages-projects.vercel.app/api",j=re.create({baseURL:le,headers:{"Content-Type":"application/json"}});j.interceptors.request.use(r=>{const o=localStorage.getItem("token");return o&&(r.headers.Authorization=`Bearer ${o}`),r},r=>Promise.reject(r));j.interceptors.response.use(r=>r,r=>{var o;return((o=r.response)==null?void 0:o.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(r)});const M=l.createContext(),I=()=>{const r=l.useContext(M);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},de=({children:r})=>{const[o,d]=l.useState(null),[s,n]=l.useState(!0);l.useEffect(()=>{const t=localStorage.getItem("token");t?(j.defaults.headers.common.Authorization=`Bearer ${t}`,j.get("/users/profile").then(u=>{d(u.data)}).catch(()=>{localStorage.removeItem("token"),delete j.defaults.headers.common.Authorization}).finally(()=>{n(!1)})):n(!1)},[]);const a={user:o,setUser:d,login:async(t,u)=>{var g,x;try{const c=await j.post("/users/login",{email:t,password:u}),{token:b,...v}=c.data;return localStorage.setItem("token",b),j.defaults.headers.common.Authorization=`Bearer ${b}`,d(v),{success:!0}}catch(c){return{success:!1,message:((x=(g=c.response)==null?void 0:g.data)==null?void 0:x.message)||"Login failed"}}},register:async(t,u,g)=>{var x,c;try{const b=await j.post("/users/register",{name:t,email:u,password:g}),{token:v,...S}=b.data;return localStorage.setItem("token",v),j.defaults.headers.common.Authorization=`Bearer ${v}`,d(S),{success:!0}}catch(b){return{success:!1,message:((c=(x=b.response)==null?void 0:x.data)==null?void 0:c.message)||"Registration failed"}}},logout:()=>{localStorage.removeItem("token"),delete j.defaults.headers.common.Authorization,d(null)},loading:s};return e.jsx(M.Provider,{value:a,children:r})},ce=()=>{const[r,o]=l.useState({email:"",password:""}),[d,s]=l.useState(""),[n,i]=l.useState(!1),{login:m}=I(),p=t=>{o({...r,[t.target.name]:t.target.value})},a=async t=>{t.preventDefault(),s(""),i(!0);const u=await m(r.email,r.password);u.success||s(u.message),i(!1)};return e.jsx("div",{className:"container",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",padding:"2rem"},children:e.jsxs("div",{style:{background:"#fff",borderRadius:"1.5rem",padding:"3rem",width:"100%",maxWidth:"450px",boxShadow:"0 20px 60px rgba(0,0,0,0.15)",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"0.5rem",fontWeight:"bold"},children:"ðŸ“¦ Shipment Tracker"}),e.jsx("p",{style:{color:"#718096",fontSize:"1rem"},children:"Track and manage your shipments efficiently"})]}),e.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",color:"#2d3748",fontSize:"1.75rem",fontWeight:"600"},children:"Welcome Back"}),d&&e.jsx("div",{style:{color:"#c53030",background:"#fed7d7",border:"1px solid #fc8181",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem",fontSize:"0.9rem"},children:d}),e.jsxs("form",{onSubmit:a,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",className:"form-control",value:r.email,onChange:p,placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"password",name:"password",className:"form-control",value:r.password,onChange:p,placeholder:"Enter your password",required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",marginBottom:"1.5rem",padding:"1rem",fontSize:"1rem",fontWeight:"600"},disabled:n,children:n?e.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx("div",{className:"loading-spinner"}),"Signing In..."]}):"Sign In"})]}),e.jsx("div",{style:{textAlign:"center"},children:e.jsxs("p",{style:{color:"#718096",fontSize:"0.9rem"},children:["Don't have an account?"," ",e.jsx(B,{to:"/register",style:{color:"#4299e1",textDecoration:"none",fontWeight:"600"},children:"Create Account"})]})})]})})},me=()=>{const[r,o]=l.useState({name:"",email:"",password:"",confirmPassword:""}),[d,s]=l.useState(""),[n,i]=l.useState(!1),{register:m}=I(),p=t=>{o({...r,[t.target.name]:t.target.value})},a=async t=>{if(t.preventDefault(),s(""),r.password!==r.confirmPassword){s("Passwords do not match");return}if(r.password.length<6){s("Password must be at least 6 characters");return}i(!0);const u=await m(r.name,r.email,r.password);u.success||s(u.message),i(!1)};return e.jsx("div",{className:"container",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",padding:"2rem"},children:e.jsxs("div",{style:{background:"#fff",borderRadius:"1.5rem",padding:"3rem",width:"100%",maxWidth:"450px",boxShadow:"0 20px 60px rgba(0,0,0,0.15)",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"0.5rem",fontWeight:"bold"},children:"ðŸ“¦ Shipment Tracker"}),e.jsx("p",{style:{color:"#718096",fontSize:"1rem"},children:"Join us to track and manage shipments"})]}),e.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",color:"#2d3748",fontSize:"1.75rem",fontWeight:"600"},children:"Create Account"}),d&&e.jsx("div",{style:{color:"#c53030",background:"#fed7d7",border:"1px solid #fc8181",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem",fontSize:"0.9rem"},children:d}),e.jsxs("form",{onSubmit:a,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Full Name"}),e.jsx("input",{type:"text",name:"name",className:"form-control",value:r.name,onChange:p,placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",className:"form-control",value:r.email,onChange:p,placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"password",name:"password",className:"form-control",value:r.password,onChange:p,placeholder:"Create a password (min 6 characters)",required:!0,minLength:"6"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Confirm Password"}),e.jsx("input",{type:"password",name:"confirmPassword",className:"form-control",value:r.confirmPassword,onChange:p,placeholder:"Confirm your password",required:!0,minLength:"6"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",marginBottom:"1.5rem",padding:"1rem",fontSize:"1rem",fontWeight:"600"},disabled:n,children:n?e.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx("div",{className:"loading-spinner"}),"Creating Account..."]}):"Create Account"})]}),e.jsx("div",{style:{textAlign:"center"},children:e.jsxs("p",{style:{color:"#718096",fontSize:"0.9rem"},children:["Already have an account?"," ",e.jsx(B,{to:"/login",style:{color:"#4299e1",textDecoration:"none",fontWeight:"600"},children:"Sign In"})]})})]})})},ge=({shipments:r,onEdit:o,onDelete:d,onGetPackingInstructions:s,onQuickStatusUpdate:n})=>{const i=a=>{const t={PENDING:{bg:"#fef5e7",color:"#b7791f",border:"#f6e05e"},IN_TRANSIT:{bg:"#bee3f8",color:"#2b6cb0",border:"#63b3ed"},DELIVERED:{bg:"#c6f6d5",color:"#2f855a",border:"#68d391"},CANCELLED:{bg:"#fed7d7",color:"#c53030",border:"#fc8181"}},u=t[a]||t.PENDING;return e.jsx("span",{style:{backgroundColor:u.bg,color:u.color,border:`1px solid ${u.border}`,padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:a.replace("_"," ")})},m=a=>{const t={LOW:{bg:"#bee3f8",color:"#2b6cb0"},NORMAL:{bg:"#c6f6d5",color:"#2f855a"},HIGH:{bg:"#fef5e7",color:"#b7791f"},URGENT:{bg:"#fed7d7",color:"#c53030"}},u=t[a]||t.NORMAL;return e.jsx("span",{style:{backgroundColor:u.bg,color:u.color,padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:a})},p=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return r.length===0?e.jsxs("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",borderRadius:"0.75rem",padding:"2.5rem 1.5rem",textAlign:"center",boxShadow:"0 2px 10px rgba(0,0,0,0.08)",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.75rem"}}),e.jsx("h3",{style:{color:"#2d3748",marginBottom:"0.5rem",fontSize:"1.25rem",fontWeight:"600"},children:"No shipments found"}),e.jsx("p",{style:{color:"#718096",fontSize:"0.9rem",margin:0},children:"Create your first shipment to get started!"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:r.map(a=>e.jsxs("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",borderRadius:"0.75rem",padding:"1.25rem",boxShadow:"0 2px 10px rgba(0,0,0,0.08)",border:"1px solid #e2e8f0",transition:"all 0.2s ease"},onMouseEnter:t=>{t.currentTarget.style.transform="translateY(-1px)",t.currentTarget.style.boxShadow="0 4px 20px rgba(0,0,0,0.12)",t.currentTarget.style.borderColor="#cbd5e0"},onMouseLeave:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 2px 10px rgba(0,0,0,0.08)",t.currentTarget.style.borderColor="#e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",flexWrap:"wrap",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1,minWidth:"250px"},children:[e.jsx("h3",{style:{margin:0,color:"#2d3748",fontSize:"1.1rem",fontWeight:"600",lineHeight:"1.2"},children:a.description}),i(a.status),a.is_fragile&&e.jsx("span",{style:{background:"linear-gradient(135deg, #fef5e7 0%, #fed7aa 100%)",color:"#b7791f",padding:"0.2rem 0.5rem",borderRadius:"0.375rem",fontSize:"0.7rem",fontWeight:"600",border:"1px solid #f6e05e"},children:"FRAGILE"}),a.priority&&a.priority!=="NORMAL"&&m(a.priority)]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0},children:[e.jsx("button",{onClick:()=>s(a),style:{background:"linear-gradient(135deg, #48bb78 0%, #38a169 100%)",color:"white",border:"none",padding:"0.4rem 0.75rem",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(72, 187, 120, 0.3)",whiteSpace:"nowrap"},onMouseEnter:t=>{t.target.style.transform="translateY(-1px)",t.target.style.boxShadow="0 2px 6px rgba(72, 187, 120, 0.4)"},onMouseLeave:t=>{t.target.style.transform="translateY(0)",t.target.style.boxShadow="0 1px 3px rgba(72, 187, 120, 0.3)"},children:"AI Tips"}),e.jsx("button",{onClick:()=>n(a),style:{background:"linear-gradient(135deg, #4299e1 0%, #3182ce 100%)",color:"white",border:"none",padding:"0.4rem 0.75rem",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(66, 153, 225, 0.3)",whiteSpace:"nowrap"},onMouseEnter:t=>{t.target.style.transform="translateY(-1px)",t.target.style.boxShadow="0 2px 6px rgba(66, 153, 225, 0.4)"},onMouseLeave:t=>{t.target.style.transform="translateY(0)",t.target.style.boxShadow="0 1px 3px rgba(66, 153, 225, 0.3)"},children:"Status"}),e.jsx("button",{onClick:()=>o(a),style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"0.4rem 0.75rem",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(102, 126, 234, 0.3)",whiteSpace:"nowrap"},onMouseEnter:t=>{t.target.style.transform="translateY(-1px)",t.target.style.boxShadow="0 2px 6px rgba(102, 126, 234, 0.4)"},onMouseLeave:t=>{t.target.style.transform="translateY(0)",t.target.style.boxShadow="0 1px 3px rgba(102, 126, 234, 0.3)"},children:"Edit"}),e.jsx("button",{onClick:()=>d(a._id),style:{background:"linear-gradient(135deg, #f56565 0%, #e53e3e 100%)",color:"white",border:"none",padding:"0.4rem 0.75rem",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(245, 101, 101, 0.3)",whiteSpace:"nowrap"},onMouseEnter:t=>{t.target.style.transform="translateY(-1px)",t.target.style.boxShadow="0 2px 6px rgba(245, 101, 101, 0.4)"},onMouseLeave:t=>{t.target.style.transform="translateY(0)",t.target.style.boxShadow="0 1px 3px rgba(245, 101, 101, 0.3)"},children:"ðŸ—‘ï¸"})]})]}),a.tracking_number&&e.jsxs("div",{style:{fontSize:"0.85rem",color:"#4299e1",marginBottom:"1rem",padding:"0.5rem 0.75rem",background:"linear-gradient(135deg, #ebf8ff 0%, #bee3f8 100%)",borderRadius:"0.5rem",border:"1px solid #90cdf4",fontWeight:"500"},children:["ðŸ“ ",e.jsx("strong",{children:"Tracking:"})," ",a.tracking_number]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%)",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#4a5568",fontWeight:"600",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:"ðŸšš Route"}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#2d3748",fontWeight:"500",marginBottom:"0.25rem"},children:[a.origin," â†’ ",a.destination]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#718096"},children:[a.distance_km," km"]})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%)",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #9ae6b4"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#2f855a",fontWeight:"600",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:"ðŸ“¦ Package"}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#1a365d",fontWeight:"500",marginBottom:"0.25rem"},children:[a.weight_kg||1," kg â€¢ ",a.shipping_method]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#718096"},children:["Priority: ",a.priority||"Normal"]})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #fffaf0 0%, #fef5e7 100%)",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #f6e05e"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#b7791f",fontWeight:"600",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:"ðŸ’° Cost & Time"}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#1a365d",fontWeight:"500",marginBottom:"0.25rem"},children:["â‚¹",a.estimated_cost||"0.00"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#718096"},children:[a.estimated_delivery_days," days",a.actual_delivery_date&&e.jsxs("span",{children:[" â€¢ Delivered ",p(a.actual_delivery_date)]})]})]})]}),a.notes&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #ebf8ff 0%, #bee3f8 100%)",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #90cdf4",marginBottom:"0.75rem"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#2b6cb0",fontWeight:"600",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:"Notes"}),e.jsx("p",{style:{margin:0,color:"#2d3748",fontSize:"0.8rem",lineHeight:"1.4"},children:a.notes})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.5rem",borderTop:"1px solid #e2e8f0",fontSize:"0.75rem",color:"#718096"},children:[e.jsxs("span",{children:["Created: ",p(a.createdAt)]}),a.updatedAt&&a.updatedAt!==a.createdAt&&e.jsxs("span",{children:["Updated: ",p(a.updatedAt)]})]})]},a._id))})},pe=({shipment:r,onClose:o,onSaved:d})=>{const[s,n]=l.useState({description:"",status:"PENDING",is_fragile:!1,origin:"",destination:"",distance_km:"",shipping_method:"STANDARD",priority:"NORMAL",weight_kg:1,notes:""}),[i,m]=l.useState(!1),[p,a]=l.useState("");l.useEffect(()=>{r&&n({description:r.description||"",status:r.status||"PENDING",is_fragile:r.is_fragile||!1,origin:r.origin||"",destination:r.destination||"",distance_km:r.distance_km||"",shipping_method:r.shipping_method||"STANDARD",priority:r.priority||"NORMAL",weight_kg:r.weight_kg||1,notes:r.notes||""})},[r]);const t=g=>{const{name:x,value:c,type:b,checked:v}=g.target;n({...s,[x]:b==="checkbox"?v:c})},u=async g=>{var x,c;g.preventDefault(),a(""),m(!0);try{const b={...s,distance_km:parseFloat(s.distance_km),weight_kg:parseFloat(s.weight_kg)};r?await j.put(`/shipments/${r._id}`,b):await j.post("/shipments",b),d()}catch(b){console.error("Error saving shipment:",b),a(((c=(x=b.response)==null?void 0:x.data)==null?void 0:c.message)||"Failed to save shipment")}finally{m(!1)}};return e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h3",{children:r?"Edit Shipment":"Create New Shipment"}),e.jsx("button",{onClick:o,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666"},children:"Ã—"})]}),p&&e.jsx("div",{style:{color:"#dc3545",background:"#f8d7da",border:"1px solid #f5c6cb",padding:"0.75rem",borderRadius:"4px",marginBottom:"1rem"},children:p}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description *"}),e.jsx("input",{type:"text",name:"description",className:"form-control",value:s.description,onChange:t,required:!0,placeholder:"e.g., Electronics, Furniture, Documents..."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Origin *"}),e.jsx("input",{type:"text",name:"origin",className:"form-control",value:s.origin,onChange:t,required:!0,placeholder:"e.g., New York, NY"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Destination *"}),e.jsx("input",{type:"text",name:"destination",className:"form-control",value:s.destination,onChange:t,required:!0,placeholder:"e.g., Los Angeles, CA"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Distance (km) *"}),e.jsx("input",{type:"number",name:"distance_km",className:"form-control",value:s.distance_km,onChange:t,required:!0,min:"1",placeholder:"e.g., 500"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Weight (kg) *"}),e.jsx("input",{type:"number",name:"weight_kg",className:"form-control",value:s.weight_kg,onChange:t,required:!0,min:"0.1",step:"0.1",placeholder:"e.g., 2.5"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Shipping Method"}),e.jsxs("select",{name:"shipping_method",className:"form-control",value:s.shipping_method,onChange:t,children:[e.jsx("option",{value:"STANDARD",children:"Standard"}),e.jsx("option",{value:"EXPRESS",children:"Express"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsxs("select",{name:"priority",className:"form-control",value:s.priority,onChange:t,children:[e.jsx("option",{value:"LOW",children:"Low"}),e.jsx("option",{value:"NORMAL",children:"Normal"}),e.jsx("option",{value:"HIGH",children:"High"}),e.jsx("option",{value:"URGENT",children:"Urgent"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{name:"status",className:"form-control",value:s.status,onChange:t,children:[e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"IN_TRANSIT",children:"In Transit"}),e.jsx("option",{value:"DELIVERED",children:"Delivered"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"is_fragile",checked:s.is_fragile,onChange:t}),e.jsx("span",{className:"form-label",style:{margin:0},children:"Fragile Item"})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Notes (Optional)"}),e.jsx("textarea",{name:"notes",className:"form-control",value:s.notes,onChange:t,placeholder:"Additional notes, special instructions, or comments...",rows:"3",style:{resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[e.jsx("button",{type:"button",onClick:o,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1},disabled:i,children:i?"Saving...":r?"Update":"Create"})]})]})]})})},ue=({data:r,onClose:o})=>{if(!r)return null;const{loading:d,shipment:s,instructions:n,error:i}=r;return e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"600px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h3",{children:"AI Packing Instructions"}),e.jsx("button",{onClick:o,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666"},children:"Ã—"})]}),s&&e.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"4px",marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{margin:"0 0 0.5rem 0"},children:"Shipment Details"}),e.jsxs("p",{style:{margin:0,fontSize:"14px"},children:[e.jsx("strong",{children:"Item:"})," ",s.description,e.jsx("br",{}),e.jsx("strong",{children:"Type:"})," ",s.is_fragile?"Fragile":"Standard",e.jsx("br",{}),e.jsx("strong",{children:"Method:"})," ",s.shipping_method,e.jsx("br",{}),e.jsx("strong",{children:"Route:"})," ",s.origin," â†’ ",s.destination]})]}),d&&e.jsxs("div",{style:{textAlign:"center",padding:"3rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #007bff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("div",{children:"Generating AI packing instructions..."}),e.jsx("style",{jsx:!0,children:`
              @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
              }
            `})]}),i&&e.jsxs("div",{style:{color:"#dc3545",background:"#f8d7da",border:"1px solid #f5c6cb",padding:"1rem",borderRadius:"4px",marginBottom:"1rem"},children:[e.jsx("strong",{children:"Error:"})," ",i]}),n&&e.jsxs("div",{children:[e.jsxs("div",{style:{background:"#e7f3ff",border:"1px solid #b3d9ff",borderRadius:"4px",padding:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{color:"#004085",fontSize:"14px",fontWeight:"bold",marginBottom:"0.5rem"},children:"âœ¨ AI-Generated Packing Instructions"}),e.jsx("div",{style:{whiteSpace:"pre-wrap",lineHeight:"1.6",color:"#333"},children:n})]}),e.jsx("div",{style:{fontSize:"12px",color:"#666",fontStyle:"italic",textAlign:"center",marginBottom:"1rem"},children:"These instructions were generated by AI based on your shipment details. Please review and adapt them according to your specific needs."})]}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("button",{onClick:o,className:"btn btn-primary",children:"Close"})})]})})},fe=({shipment:r,onStatusUpdated:o,onClose:d})=>{const[s,n]=l.useState(r.status),[i,m]=l.useState(r.actual_delivery_date?new Date(r.actual_delivery_date).toISOString().split("T")[0]:""),[p,a]=l.useState(""),[t,u]=l.useState(""),[g,x]=l.useState(!1),[c,b]=l.useState(""),v=async(y,w)=>{var f,k;x(!0),b("");try{const N={status:y,auto_update_reason:w,timestamp:new Date().toISOString()};y==="DELIVERED"&&(N.actual_delivery_date=new Date().toISOString().split("T")[0]),await j.patch(`/shipments/${r._id}/status`,N),o(),d()}catch(N){b(((k=(f=N.response)==null?void 0:f.data)==null?void 0:k.message)||"Failed to update status")}finally{x(!1)}},S=async y=>{var w,f;y.preventDefault(),x(!0),b("");try{const k={status:s,manual_update:!0,tracking_notes:p,current_location:t};s==="DELIVERED"&&i&&(k.actual_delivery_date=i),await j.patch(`/shipments/${r._id}/status`,k),o(),d()}catch(k){b(((f=(w=k.response)==null?void 0:w.data)==null?void 0:f.message)||"Failed to update status")}finally{x(!1)}},E=y=>{switch(y){case"PENDING":return"#ffc107";case"IN_TRANSIT":return"#17a2b8";case"DELIVERED":return"#28a745";case"CANCELLED":return"#dc3545";default:return"#6c757d"}};return e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"500px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h3",{children:"ðŸ“ Shipment Tracking Update"}),e.jsx("button",{onClick:d,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666"},children:"Ã—"})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem",border:"1px solid #dee2e6"},children:[e.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#2d3748"},children:r.description}),e.jsxs("p",{style:{margin:0,fontSize:"0.85rem",color:"#6c757d"},children:[r.tracking_number&&`ðŸ·ï¸ ${r.tracking_number} â€¢ `,"ðŸ“ ",r.origin," â†’ ",r.destination]})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h5",{style:{margin:"0 0 1rem 0",color:"#2d3748",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"Simulated Auto-Tracking"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem"},children:[e.jsxs("button",{onClick:()=>v("IN_TRANSIT","GPS: Vehicle departed warehouse"),disabled:g||r.status==="DELIVERED",style:{background:"linear-gradient(135deg, #17a2b8 0%, #138496 100%)",color:"white",border:"none",padding:"0.75rem",borderRadius:"0.375rem",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:["ðŸšš In Transit",e.jsx("br",{}),e.jsx("small",{style:{fontSize:"0.7rem",opacity:.9},children:"GPS Update"})]}),e.jsxs("button",{onClick:()=>v("DELIVERED","Delivery confirmed via recipient signature"),disabled:g||r.status==="DELIVERED",style:{background:"linear-gradient(135deg, #28a745 0%, #20c997 100%)",color:"white",border:"none",padding:"0.75rem",borderRadius:"0.375rem",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:["âœ… Delivered",e.jsx("br",{}),e.jsx("small",{style:{fontSize:"0.7rem",opacity:.9},children:"Auto-Confirm"})]}),e.jsxs("button",{onClick:()=>v("CANCELLED","Exception: Address unreachable"),disabled:g||r.status==="DELIVERED",style:{background:"linear-gradient(135deg, #dc3545 0%, #c82333 100%)",color:"white",border:"none",padding:"0.75rem",borderRadius:"0.375rem",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:["âŒ Exception",e.jsx("br",{}),e.jsx("small",{style:{fontSize:"0.7rem",opacity:.9},children:"Auto-Cancel"})]})]}),e.jsx("p",{style:{fontSize:"0.75rem",color:"#6c757d",margin:"0.75rem 0 0 0",fontStyle:"italic"},children:"ðŸ’¡ In real systems: Updates come from carrier APIs, GPS devices, warehouse scans, etc."})]}),e.jsx("hr",{style:{margin:"1.5rem 0",border:"none",borderTop:"1px solid #dee2e6"}}),e.jsxs("div",{children:[e.jsx("h5",{style:{margin:"0 0 1rem 0",color:"#2d3748",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"âœ‹ Manual Override"}),c&&e.jsx("div",{style:{color:"#dc3545",background:"#f8d7da",border:"1px solid #f5c6cb",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.85rem"},children:c}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.85rem",fontWeight:"600",color:"#495057"},children:"Status Override"}),e.jsxs("select",{className:"form-control",value:s,onChange:y=>n(y.target.value),style:{borderLeft:`4px solid ${E(s)}`,paddingLeft:"12px",fontSize:"0.9rem"},children:[e.jsx("option",{value:"PENDING",children:"ðŸ“‹ Pending"}),e.jsx("option",{value:"IN_TRANSIT",children:"ðŸšš In Transit"}),e.jsx("option",{value:"DELIVERED",children:"âœ… Delivered"}),e.jsx("option",{value:"CANCELLED",children:"âŒ Cancelled"})]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.85rem",fontWeight:"600",color:"#495057"},children:"Current Location (Optional)"}),e.jsx("input",{type:"text",className:"form-control",value:t,onChange:y=>u(y.target.value),placeholder:"e.g., Mumbai Distribution Center",style:{fontSize:"0.9rem"}})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.85rem",fontWeight:"600",color:"#495057"},children:"Tracking Notes"}),e.jsx("textarea",{className:"form-control",value:p,onChange:y=>a(y.target.value),placeholder:"Reason for manual update (delivery attempt failed, customer request, etc.)",rows:"2",style:{fontSize:"0.9rem",resize:"vertical"}})]}),s==="DELIVERED"&&e.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[e.jsx("label",{className:"form-label",style:{fontSize:"0.85rem",fontWeight:"600",color:"#495057"},children:"Delivery Date"}),e.jsx("input",{type:"date",className:"form-control",value:i,onChange:y=>m(y.target.value),max:new Date().toISOString().split("T")[0],style:{fontSize:"0.9rem"}})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:d,className:"btn btn-secondary",style:{flex:1,fontSize:"0.9rem"},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1,fontSize:"0.9rem"},disabled:g,children:g?"Updating...":"Manual Update"})]})]}),e.jsx("p",{style:{fontSize:"0.75rem",color:"#6c757d",margin:"0.75rem 0 0 0",fontStyle:"italic"},children:"ðŸ”§ Manual updates: For exceptions, customer service, or when automated systems fail"})]})]})})},he=({refreshTrigger:r})=>{var u,g,x;const[o,d]=l.useState(null),[s,n]=l.useState(!0);l.useEffect(()=>{i()},[]),l.useEffect(()=>{r>0&&i()},[r]);const i=async()=>{try{n(!0);const c=await j.get("/shipments/stats");d(c.data)}catch(c){console.error("Error fetching stats:",c)}finally{n(!1)}};if(s)return e.jsx("div",{style:{background:"#fff",borderRadius:"1rem",padding:"2rem",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",textAlign:"center"},children:e.jsx("div",{style:{color:"#718096",fontSize:"1.1rem"},children:"Loading statistics..."})});if(!o)return e.jsx("div",{style:{background:"#fff",borderRadius:"1rem",padding:"2rem",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",textAlign:"center"},children:e.jsx("div",{style:{color:"#718096",fontSize:"1.1rem"},children:"Unable to load statistics"})});const{summary:m,financial:p,recentShipments:a,priorityBreakdown:t}=o;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff",borderRadius:"1rem",padding:"1.5rem",textAlign:"center",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.4)"},children:[e.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"2rem",fontWeight:"bold"},children:m.total}),e.jsx("p",{style:{margin:0,opacity:.9},children:"Total Shipments"})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)",color:"#8b4513",borderRadius:"1rem",padding:"1.5rem",textAlign:"center",boxShadow:"0 8px 32px rgba(252, 182, 159, 0.4)"},children:[e.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"2rem",fontWeight:"bold"},children:m.pending}),e.jsx("p",{style:{margin:0,opacity:.9},children:"Pending"})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)",color:"#2d3748",borderRadius:"1rem",padding:"1.5rem",textAlign:"center",boxShadow:"0 8px 32px rgba(168, 237, 234, 0.4)"},children:[e.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"2rem",fontWeight:"bold"},children:m.inTransit}),e.jsx("p",{style:{margin:0,opacity:.8},children:"In Transit"})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #96fbc4 0%, #f9f047 100%)",color:"#2d3748",borderRadius:"1rem",padding:"1.5rem",textAlign:"center",boxShadow:"0 8px 32px rgba(150, 251, 196, 0.4)"},children:[e.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"2rem",fontWeight:"bold"},children:m.delivered}),e.jsx("p",{style:{margin:0,opacity:.8},children:"Delivered"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"#fff",borderRadius:"1rem",padding:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:[e.jsx("h4",{style:{marginBottom:"1rem",color:"#2d3748",fontSize:"1.25rem"},children:"Financial Overview"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0"},children:[e.jsx("span",{style:{color:"#4a5568"},children:"Total Estimated Cost:"}),e.jsxs("strong",{style:{color:"#2d3748"},children:["â‚¹",((u=p.totalCost)==null?void 0:u.toFixed(2))||"0.00"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0"},children:[e.jsx("span",{style:{color:"#4a5568"},children:"Average Cost:"}),e.jsxs("strong",{style:{color:"#2d3748"},children:["â‚¹",((g=p.averageCost)==null?void 0:g.toFixed(2))||"0.00"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0"},children:[e.jsx("span",{style:{color:"#4a5568"},children:"Total Distance:"}),e.jsxs("strong",{style:{color:"#2d3748"},children:[((x=p.totalDistance)==null?void 0:x.toLocaleString())||0," km"]})]})]})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:"1rem",padding:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:[e.jsx("h4",{style:{marginBottom:"1rem",color:"#2d3748",fontSize:"1.25rem"},children:"Priority Breakdown"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0"},children:[e.jsx("span",{style:{color:"#4a5568"},children:"ðŸ”´ Urgent:"}),e.jsx("strong",{style:{color:"#e53e3e"},children:t.URGENT||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0"},children:[e.jsx("span",{style:{color:"#4a5568"},children:"ðŸŸ  High:"}),e.jsx("strong",{style:{color:"#dd6b20"},children:t.HIGH||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0"},children:[e.jsx("span",{style:{color:"#4a5568"},children:"ðŸŸ¢ Normal:"}),e.jsx("strong",{style:{color:"#38a169"},children:t.NORMAL||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0"},children:[e.jsx("span",{style:{color:"#4a5568"},children:"ðŸ”µ Low:"}),e.jsx("strong",{style:{color:"#3182ce"},children:t.LOW||0})]})]})]})]}),a&&a.length>0&&e.jsxs("div",{style:{background:"#fff",borderRadius:"1rem",padding:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:[e.jsx("h4",{style:{marginBottom:"1rem",color:"#2d3748",fontSize:"1.25rem"},children:"Recent Shipments"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:a.map(c=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"#f7fafc",borderRadius:"0.5rem",fontSize:"0.9rem",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#2d3748"},children:c.description}),c.tracking_number&&e.jsxs("span",{style:{color:"#718096",marginLeft:"0.5rem"},children:["(",c.tracking_number,")"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",background:c.status==="DELIVERED"?"#c6f6d5":c.status==="IN_TRANSIT"?"#bee3f8":c.status==="PENDING"?"#fef5e7":"#fed7d7",color:c.status==="DELIVERED"?"#2f855a":c.status==="IN_TRANSIT"?"#2b6cb0":c.status==="PENDING"?"#b7791f":"#c53030"},children:c.status.replace("_"," ")}),e.jsxs("span",{style:{color:"#718096",fontSize:"0.8rem"},children:[c.estimated_delivery_days," days"]})]})]},c._id))})]})]})},xe=()=>{const[r,o]=l.useState([]),[d,s]=l.useState(!0),[n,i]=l.useState(!1),[m,p]=l.useState(null),[a,t]=l.useState(!1),[u,g]=l.useState(null),[x,c]=l.useState(!1),[b,v]=l.useState(null),[S,E]=l.useState(!0),[y,w]=l.useState(0),[f,k]=l.useState({status:"all",search:"",page:1,pageSize:10}),[N,O]=l.useState({pages:1,totalCount:0});l.useEffect(()=>{z()},[f]);const z=async()=>{try{s(!0);const h=new URLSearchParams;f.status!=="all"&&h.append("status",f.status),f.search&&h.append("search",f.search),h.append("page",f.page),h.append("pageSize",f.pageSize);const C=await j.get(`/shipments?${h.toString()}`);o(C.data.shipments),O({pages:C.data.pages,totalCount:C.data.totalCount})}catch(h){console.error("Error fetching shipments:",h)}finally{s(!1)}},F=()=>{p(null),i(!0)},G=h=>{p(h),i(!0)},q=async h=>{if(window.confirm("Are you sure you want to delete this shipment?"))try{await j.delete(`/shipments/${h}`),z(),w(C=>C+1)}catch(C){console.error("Error deleting shipment:",C),alert("Failed to delete shipment")}},$=()=>{i(!1),z(),w(h=>h+1)},H=async h=>{try{g({loading:!0,shipment:h}),t(!0);const C=await j.post(`/shipments/${h._id}/packing-instructions`);g({loading:!1,shipment:h,instructions:C.data.instructions})}catch(C){console.error("Error getting packing instructions:",C),g({loading:!1,shipment:h,error:"Failed to generate packing instructions. Please try again."})}},V=h=>{v(h),c(!0)},Y=()=>{c(!1),v(null),z(),w(h=>h+1)},_=h=>{k({...f,...h,page:1})},T=h=>{k({...f,page:h})};return e.jsxs("div",{className:"container",children:[e.jsx("div",{style:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",borderRadius:"1rem",padding:"2rem",marginBottom:"2rem",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"#2d3748",fontSize:"2rem",fontWeight:"bold"},children:"Dashboard"}),e.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#718096",fontSize:"1rem"},children:"Manage and track your shipments efficiently"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:()=>E(!S),style:{background:S?"#4299e1":"transparent",color:S?"#fff":"#4299e1",border:"2px solid #4299e1",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s"},children:S?"Hide Stats":"Show Stats"}),e.jsx("button",{onClick:F,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",transition:"all 0.2s"},children:"+ New Shipment"})]})]})}),S&&e.jsx("div",{style:{marginBottom:"2rem"},children:e.jsx(he,{refreshTrigger:y})}),e.jsxs("div",{style:{background:"#fff",borderRadius:"1rem",padding:"1.5rem",marginBottom:"2rem",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:[e.jsx("h3",{style:{margin:"0 0 1.5rem 0",color:"#2d3748",fontSize:"1.25rem"},children:"Filter Shipments"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr auto",gap:"1rem",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#4a5568"},children:"Status Filter"}),e.jsxs("select",{style:{width:"100%",padding:"0.75rem",border:"2px solid #e2e8f0",borderRadius:"0.5rem",fontSize:"0.9rem",transition:"border-color 0.2s"},value:f.status,onChange:h=>_({status:h.target.value}),children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"IN_TRANSIT",children:"In Transit"}),e.jsx("option",{value:"DELIVERED",children:"Delivered"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#4a5568"},children:"Search"}),e.jsx("input",{type:"text",style:{width:"100%",padding:"0.75rem",border:"2px solid #e2e8f0",borderRadius:"0.5rem",fontSize:"0.9rem",transition:"border-color 0.2s"},placeholder:"Search by description, origin, or destination...",value:f.search,onChange:h=>_({search:h.target.value})})]}),e.jsx("button",{onClick:()=>k({status:"all",search:"",page:1,pageSize:10}),style:{background:"#718096",color:"#fff",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:"Clear"})]})]}),d?e.jsx("div",{style:{textAlign:"center",padding:"4rem",background:"#fff",borderRadius:"1rem",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:e.jsx("div",{style:{fontSize:"1.1rem",color:"#718096"},children:"Loading shipments..."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{background:"#fff",borderRadius:"1rem",overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:e.jsx(ge,{shipments:r,onEdit:G,onDelete:q,onGetPackingInstructions:H,onQuickStatusUpdate:V})}),N.pages>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginTop:"2rem",padding:"1rem",background:"#fff",borderRadius:"1rem",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[e.jsx("button",{style:{background:f.page===1?"#e2e8f0":"#4299e1",color:f.page===1?"#a0aec0":"#fff",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",cursor:f.page===1?"not-allowed":"pointer",fontSize:"0.9rem",fontWeight:"600"},disabled:f.page===1,onClick:()=>T(f.page-1),children:"Previous"}),e.jsxs("span",{style:{display:"flex",alignItems:"center",padding:"0 1rem",fontSize:"0.9rem",color:"#4a5568",fontWeight:"600"},children:["Page ",f.page," of ",N.pages]}),e.jsx("button",{style:{background:f.page===N.pages?"#e2e8f0":"#4299e1",color:f.page===N.pages?"#a0aec0":"#fff",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",cursor:f.page===N.pages?"not-allowed":"pointer",fontSize:"0.9rem",fontWeight:"600"},disabled:f.page===N.pages,onClick:()=>T(f.page+1),children:"Next"})]}),e.jsxs("div",{style:{textAlign:"center",marginTop:"1rem",color:"#718096",fontSize:"0.9rem",fontWeight:"500"},children:["Showing ",r.length," of ",N.totalCount," shipments"]})]}),n&&e.jsx(pe,{shipment:m,onClose:()=>i(!1),onSaved:$}),a&&e.jsx(ue,{data:u,onClose:()=>t(!1)}),x&&b&&e.jsx(fe,{shipment:b,onStatusUpdated:Y,onClose:()=>c(!1)})]})},be=()=>{const{user:r,setUser:o}=I(),[d,s]=l.useState({name:"",email:"",phone:"",company:"",address:""}),[n,i]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[m,p]=l.useState(!1),[a,t]=l.useState(""),[u,g]=l.useState("");l.useEffect(()=>{r&&s({name:r.name||"",email:r.email||"",phone:r.phone||"",company:r.company||"",address:r.address||""})},[r]);const x=S=>{s({...d,[S.target.name]:S.target.value})},c=S=>{i({...n,[S.target.name]:S.target.value})},b=async S=>{var E,y;S.preventDefault(),p(!0),t(""),g("");try{const w=await j.put("/users/profile",d);t("Profile updated successfully!");const f={...r,...w.data};o(f),setTimeout(()=>t(""),3e3)}catch(w){g(((y=(E=w.response)==null?void 0:E.data)==null?void 0:y.message)||"Failed to update profile"),setTimeout(()=>g(""),3e3)}finally{p(!1)}},v=async S=>{var E,y;if(S.preventDefault(),n.newPassword!==n.confirmPassword){g("New passwords do not match"),setTimeout(()=>g(""),3e3);return}if(n.newPassword.length<6){g("Password must be at least 6 characters"),setTimeout(()=>g(""),3e3);return}p(!0),t(""),g("");try{await j.put("/users/password",{currentPassword:n.currentPassword,newPassword:n.newPassword}),t("Password updated successfully!"),i({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>t(""),3e3)}catch(w){g(((y=(E=w.response)==null?void 0:E.data)==null?void 0:y.message)||"Failed to update password"),setTimeout(()=>g(""),3e3)}finally{p(!1)}};return e.jsx("div",{className:"container",children:e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[e.jsx("h2",{style:{marginBottom:"2rem",textAlign:"center"},children:"User Profile"}),a&&e.jsx("div",{style:{backgroundColor:"#d4edda",color:"#155724",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.375rem",border:"1px solid #c3e6cb"},children:a}),u&&e.jsx("div",{style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.75rem",marginBottom:"1rem",borderRadius:"0.375rem",border:"1px solid #f5c6cb"},children:u}),e.jsxs("div",{style:{display:"grid",gap:"2rem"},children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"1.5rem"},children:"Personal Information"}),e.jsx("form",{onSubmit:b,children:e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Full Name"}),e.jsx("input",{type:"text",name:"name",className:"form-control",value:d.name,onChange:x,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",className:"form-control",value:d.email,onChange:x,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",className:"form-control",value:d.phone,onChange:x,placeholder:"Enter your phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Company"}),e.jsx("input",{type:"text",name:"company",className:"form-control",value:d.company,onChange:x,placeholder:"Enter your company name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsx("textarea",{name:"address",className:"form-control",value:d.address,onChange:x,placeholder:"Enter your address",rows:"3"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,style:{marginTop:"1rem"},children:m?"Updating...":"Update Profile"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"1.5rem"},children:"Change Password"}),e.jsx("form",{onSubmit:v,children:e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Current Password"}),e.jsx("input",{type:"password",name:"currentPassword",className:"form-control",value:n.currentPassword,onChange:c,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"New Password"}),e.jsx("input",{type:"password",name:"newPassword",className:"form-control",value:n.newPassword,onChange:c,required:!0,minLength:"6"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Confirm New Password"}),e.jsx("input",{type:"password",name:"confirmPassword",className:"form-control",value:n.confirmPassword,onChange:c,required:!0,minLength:"6"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,style:{marginTop:"1rem"},children:m?"Updating...":"Update Password"})]})})]})]})]})})},ye=()=>{const{user:r,logout:o}=I(),d=K(),s=X(),n=()=>{o()},i=m=>s.pathname===m;return e.jsx("header",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",padding:"1rem 0",marginBottom:"2rem"},children:e.jsxs("div",{className:"container",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h1",{style:{color:"#fff",margin:0,fontSize:"1.5rem",fontWeight:"bold"},children:"Shipment Tracker"}),e.jsxs("nav",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("button",{onClick:()=>d("/dashboard"),style:{background:i("/dashboard")?"rgba(255,255,255,0.3)":"transparent",color:"#fff",border:"1px solid rgba(255,255,255,0.3)",padding:"0.5rem 1rem",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s"},children:"Dashboard"}),e.jsx("button",{onClick:()=>d("/profile"),style:{background:i("/profile")?"rgba(255,255,255,0.3)":"transparent",color:"#fff",border:"1px solid rgba(255,255,255,0.3)",padding:"0.5rem 1rem",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s"},children:"Profile"}),e.jsxs("div",{style:{color:"#fff",padding:"0 1rem",borderLeft:"1px solid rgba(255,255,255,0.3)"},children:["Welcome, ",r==null?void 0:r.name,"!"]}),e.jsx("button",{onClick:n,style:{background:"rgba(255,255,255,0.2)",color:"#fff",border:"1px solid rgba(255,255,255,0.3)",padding:"0.5rem 1rem",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s"},children:"Logout"})]})]})})};function je(){const{user:r,loading:o}=I();return o?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx("div",{children:"Loading..."})}):e.jsxs("div",{className:"App",children:[r&&e.jsx(ye,{}),e.jsxs(Z,{children:[e.jsx(R,{path:"/login",element:r?e.jsx(D,{to:"/dashboard"}):e.jsx(ce,{})}),e.jsx(R,{path:"/register",element:r?e.jsx(D,{to:"/dashboard"}):e.jsx(me,{})}),e.jsx(R,{path:"/dashboard",element:r?e.jsx(xe,{}):e.jsx(D,{to:"/login"})}),e.jsx(R,{path:"/profile",element:r?e.jsx(be,{}):e.jsx(D,{to:"/login"})}),e.jsx(R,{path:"/",element:e.jsx(D,{to:r?"/dashboard":"/login"})})]})]})}A.createRoot(document.getElementById("root")).render(e.jsx(J.StrictMode,{children:e.jsx(ee,{children:e.jsx(de,{children:e.jsx(je,{})})})}));
